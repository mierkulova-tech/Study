"""
Вывести средний рейтинг всех пользователей
ТЗ:

Вывести средний рейтинг.
"""

# рейтинг всех пользователей

from sqlalchemy import create_engine, select, func
from FlaskProject.sqlalchemy_lessons.db import DBConnector
from FlaskProject.sqlalchemy_lessons.social_blogs_models import User

engine = create_engine('mysql+pymysql://ich1:ich1_password_ilovedbs@ich-edit.edu.itcareerhub.de:3306/social_blogs')

with DBConnector(engine) as session:
    result = session.execute(select(func.avg(User.rating)).where(User.role_id == 3)).scalar()
    print(round(result, 2))